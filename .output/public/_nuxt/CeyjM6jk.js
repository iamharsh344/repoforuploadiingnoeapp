import{_ as x,c as r,o as n,b as c,a as t,w as m,f,F as y,k as _,t as u,g,q as b,v as w,m as k,U as M,j as C,l as L,d as h}from"./BpGXDqpN.js";import{_ as T}from"./DLP3M763.js";import{_ as p}from"./BRd0g8Jw.js";import{a as z}from"./CXDXFO4_.js";const V=window.setInterval,I={data(){return{userLogined:!1,isOpen:!1,newMessage:"",isLoading:!1,unreadCount:0,messages:[],intervalId:null,error:!1,errorMsg:null}},mounted(){localStorage.getItem("authToken")&&(this.userLogined=!0),this.load(),this.startPolling()},methods:{toggleChat(){this.isOpen=!this.isOpen,this.isOpen&&(this.unreadCount=0,this.$nextTick(()=>{this.scrollToBottom()}))},closeChat(){this.isOpen=!1},async sendMessage(){if(this.newMessage.trim()){this.isLoading=!0;try{const a=await $fetch("/api/chat-sendmsg",{method:"POST",body:{msg:this.newMessage,token:localStorage.getItem("authToken")||null}});this.messages.push(a.data),this.newMessage="",this.isLoading=!1,this.$nextTick(()=>{this.scrollToBottom()})}catch(a){this.error=!0,this.errorMsg=a.statusMessage||a.message}}},async load(){try{const a=await $fetch("/api/chat-InitialMessage",{method:"GET"});this.messages=a.data}catch{}},async loadAgain(){try{const a=this.messages.length-1,e=this.messages[a]._id,i=await $fetch("/api/chat-NewMessage",{method:"POST",body:{lastMessageId:e}});if(i.data.length>0){this.unreadCount+=1;for(let o=0;o<i.data.length;o++)this.messages.push(i.data[o])}}catch{}},scrollToBottom(){this.$refs.messagesContainer&&(this.$refs.messagesContainer.scrollTop=this.$refs.messagesContainer.scrollHeight)},formatTime(a){const e=new Date,i=new Date(a),o=Math.floor((e-i)/1e3);return o<60?"Just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<2592e3?`${Math.floor(o/86400)}d ago`:`${Math.floor(o/2592e3)}mo ago`},startPolling(){this.stopPolling(),this.intervalId=V(()=>{this.loadAgain()},5e3)},stopPolling(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},beforeUnmount(){this.stopPolling()}},O={class:"fixed bottom-4 right-4 z-50"},B={key:0,class:"mb-4 w-80 sm:w-96 h-[32rem] md:h-[36rem] bg-slate-900 border border-slate-700/50 rounded-xl shadow-2xl flex flex-col backdrop-blur-sm max-w-[calc(100vw-2rem)] max-h-[calc(100vh-6rem)]",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)"}},S={class:"px-4 py-3 rounded-t-xl border-b border-slate-700/50 flex justify-between items-center shrink-0",style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)"}},j={ref:"messagesContainer",class:"flex-1 p-3 sm:p-4 bg-gray-850 overflow-y-auto space-y-4 min-h-0",style:{background:"linear-gradient(180deg, #1f2937 0%, #111827 100%)"}},P={class:"w-8 h-8 rounded-full overflow-hidden flex-shrink-0 flex items-center justify-center text-xs font-semibold"},A=["src"],H={class:"flex-1 min-w-0"},N={class:"flex items-center justify-between mb-1"},F={class:"font-medium text-sm text-gray-200"},D={class:"text-xs text-gray-400 ml-2"},U={class:"text-sm break-words text-gray-400"},E={class:"p-3 sm:p-3 rounded-b-xl border-t border-slate-700/50 shrink-0",style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)"}},q={key:0},G=["disabled"],J=["disabled"],W={key:0,class:"w-4 h-4 animate-spin",fill:"currentColor",viewBox:"0 0 20 20"},K={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},Q={key:1,class:"text-center text-gray-300"},R={class:"flex justify-end"},X={key:0,class:"w-5 h-5 sm:w-6 sm:h-6 relative z-10",fill:"currentColor",viewBox:"0 0 20 20"},Y={key:1,class:"w-5 h-5 sm:w-6 sm:h-6 relative z-10",fill:"currentColor",viewBox:"0 0 20 20"},Z={key:0,class:"absolute -top-1 -left-1 w-5 h-5 sm:w-6 sm:h-6 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-bounce shadow-lg"};function $(a,e,i,o,s,d){return n(),r("div",O,[c(M,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0 translate-y-4","enter-to-class":"transform scale-100 opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"transform scale-100 opacity-100 translate-y-0","leave-to-class":"transform scale-95 opacity-0 translate-y-4"},{default:m(()=>[s.isOpen?(n(),r("div",B,[t("div",S,[e[5]||(e[5]=t("div",{class:"flex items-center space-x-2"},[t("div",{class:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),t("h3",{class:"text-slate-100 font-semibold text-sm"},"Live Chat"),t("span",{class:"text-xs text-slate-400 hidden sm:inline"},"Online")],-1)),t("button",{onClick:e[0]||(e[0]=(...l)=>d.closeChat&&d.closeChat(...l)),class:"text-slate-400 hover:text-slate-200 transition-colors p-1 rounded-md hover:bg-slate-700/50 ml-auto"},e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),t("div",j,[(n(!0),r(y,null,_(s.messages,(l,v)=>(n(),r("div",{key:v,class:"flex items-start space-x-3"},[t("div",P,[t("img",{src:l.avatar},null,8,A)]),t("div",H,[t("div",N,[t("span",F,u(l.username),1),t("span",D,u(d.formatTime(l.timestamp)),1)]),t("div",U,u(l.message),1)])]))),128))],512),t("div",E,[s.userLogined?(n(),r("div",q,[t("form",{onSubmit:e[2]||(e[2]=b((...l)=>d.sendMessage&&d.sendMessage(...l),["prevent"])),class:"flex space-x-2"},[g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.newMessage=l),type:"text",placeholder:"Type your message...",class:"flex-1 px-3 py-2 sm:py-2.5 bg-slate-800/80 border border-slate-600/50 rounded-lg text-slate-100 text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all backdrop-blur-sm",disabled:s.isLoading},null,8,G),[[w,s.newMessage]]),t("button",{type:"submit",disabled:s.isLoading,class:"px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-75 disabled:cursor-not-allowed transition-all text-sm font-medium shadow-lg flex-shrink-0"},[s.isLoading?(n(),r("svg",W,e[6]||(e[6]=[t("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"},null,-1)]))):(n(),r("svg",K,e[7]||(e[7]=[t("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"},null,-1)])))],8,J)],32),g(t("p",{class:"text-red-400 text-sm mt-1.5"},u(s.errorMsg),513),[[k,s.error]])])):(n(),r("div",Q," Login to unlock chat "))])])):f("",!0)]),_:1}),t("div",R,[t("div",{class:C(["w-12 h-12 sm:w-14 sm:h-14 text-white rounded-full shadow-xl hover:shadow-2xl transition-all duration-200 flex items-center justify-center group relative",s.isOpen?"self-end":""]),style:{background:"linear-gradient(135deg, #4f46e5 0%, #7c3aed 50%, #a855f7 100%)"}},[t("button",{onClick:e[3]||(e[3]=(...l)=>d.toggleChat&&d.toggleChat(...l)),"aria-label":"Open-chat",class:"w-full h-full flex items-center justify-center relative z-10"},[e[10]||(e[10]=t("div",{class:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-200",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #c084fc 100%)"}},null,-1)),s.isOpen?(n(),r("svg",Y,e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(n(),r("svg",X,e[8]||(e[8]=[t("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"},null,-1)])))]),!s.isOpen&&s.unreadCount>0?(n(),r("div",Z,u(s.unreadCount>9?"9+":s.unreadCount),1)):f("",!0)],2)])])}const ee=x(I,[["render",$]]),te={},se=p+" 1x, "+z+" 2x",oe={class:"bg-gray-950 text-white py-8 px-6"},ae={class:"container mx-auto text-center"},le={class:"flex justify-center space-x-6 mb-4"};function re(a,e){const i=ee,o=T;return n(),r("footer",oe,[c(i),t("div",ae,[e[4]||(e[4]=L('<div class="flex justify-center items-center mb-4"><div class="fox-logo w-14 h-14 rounded-full flex items-center justify-center"><img src="'+p+'" srcset="'+se+'" class="w-[56px] h-[56px]" alt="SilverFoxValues" width="56" height="56"></div><h1 class="text-2xl font-bold">SilverFoxValues</h1></div><p class="text-gray-300 mb-4"><a href="mailto:support@silverfoxvalues.com" class="text-blue-400 hover:text-blue-300">support@silverfoxvalues.com</a></p>',2)),t("div",le,[c(o,{to:"/about-us",class:"text-gray-300 hover:text-white transition-colors duration-200"},{default:m(()=>e[0]||(e[0]=[h("About Us")])),_:1,__:[0]}),c(o,{to:"/blogs",class:"text-gray-300 hover:text-white transition-colors duration-200"},{default:m(()=>e[1]||(e[1]=[h("Blogs")])),_:1,__:[1]}),c(o,{to:"/privacy-policy",class:"text-gray-300 hover:text-white transition-colors duration-200"},{default:m(()=>e[2]||(e[2]=[h("Privacy Policy")])),_:1,__:[2]}),c(o,{to:"/terms-and-conditions",class:"text-gray-300 hover:text-white transition-colors duration-200"},{default:m(()=>e[3]||(e[3]=[h("Terms & Conditions")])),_:1,__:[3]})]),e[5]||(e[5]=t("p",{class:"text-gray-400 text-sm mt-4"}," Â© 2025 SilverFoxValues. All rights reserved. ",-1))])])}const ue=x(te,[["render",re]]);export{ue as _,V as s};
